<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place Details</title>
    <link rel="stylesheet" href="styles/details.css">
</head>
<body>
    <div class="details-container">
        <h1 class="place-name">Name: <span id="placeName">(backend info)</span></h1>
        <div class="rating">
            StarRating: <span id="starRating">(backend info)</span>
        </div>
        <div class="info">
            Address: <span id="address">(backend info)</span><br>
            Toilet Info: <span id="toiletInfo">(backend info)</span><br>
            Comments: <span id="comments">(backend info)</span>
        </div>
        <div class="amend_information">
            <a href="amend_information.html" class="amend-link">정보 수정 제안</a>
        </div>
        <div class="review-section">
            <h2>Reviews</h2>
            <div id="reviews">(backend info)</div>
        </div>
        <div class="review-prompt">
            <p>Leave a periodic visitor review</p>
            <textarea id="reviewText" placeholder="Please leave a review"></textarea>
            <button id="submitReview">Submit Review</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const placeId = urlParams.get('id');

            //place details
            fetch(`/place/show?id=${placeId}`)
                .then(response => response.json())
                .then(place => {
                    document.getElementById('placeName').textContent = place.name;
                    document.getElementById('starRating').textContent = place.starRating;
                    document.getElementById('address').textContent = place.address;
                    document.getElementById('toiletInfo').textContent = place.toiletInfo;
                    //화장실정보는 disabled, man, woman, bell로 나누면 되나?
                })
                .catch(error => {
                    console.error('Error:', error);
                });

            //comments
            fetch(`/comment/show?id=${placeId}`)
                .then(response => response.json())
                .then(comments => {
                    const commentsContainer = document.getElementById('reviews');
                    comments.forEach(comment => {
                        const commentElement = document.createElement('p');
                        commentElement.textContent = comment.content; // Assuming 'content' is a field in your comment object
                        commentsContainer.appendChild(commentElement);
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        });

        // 이건 일단 무시
        document.getElementById('submitReview').addEventListener('click', function() {
            const reviewText = document.getElementById('reviewText').value;
            // Here you would normally send this to the backend
            console.log('New review:', reviewText);
            // Clear the textarea
            document.getElementById('reviewText').value = '';
        });
    </script>
</body>
</html>
